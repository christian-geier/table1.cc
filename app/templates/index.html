  {% extends "base.html" %}
  {% block head %}
    {{ super() }}
    <meta name="description" content="Welcome to table1.cc - Generate Your Table 1 in seconds!
    Born out of frustration & here to ease your pain. Simply Paste to generate 'Table 1' automatically for you.">
    <meta name="keywords" content="Table 1, automate, scholar, population, publication, app">
    <meta name="author" content="Christian Geier, MD">
    <!-- <link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css"> -->
    <link rel="stylesheet" type= "text/css" href="{{ url_for('static',filename='styles/styles.css') }}">
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
    <style type="text/css">
      .important { color: #336699; }
    </style>
  {% endblock %}

  {% block content %}

<h1>Welcome to table1.cc - Generate Your <i>Table 1</i> for research papers within <em>seconds</em>!</h1>

<h3>
<strong><u>Background:</u></strong></h3>
<h5>Scholarly work often requires to generate a <em>"Table 1"</em> to show summarized <a href="https://en.wikipedia.org/wiki/Summary_statistics">population statistics</a>.
To optimize efficiency and reliability, automation of this task is desirable. Currently available software packages for <a href="https://github.com/kaz-yos/tableone" data-toggle="tooltip" title="A powerful statistical programming language">R</a> and <a href="https://github.com/tompollard/tableone"  data-toggle="tooltip" title="A programming language popular in life sciences">Python</a> provide part of the solution
but their reliance on programming syntax limits their widespread adoption in the wider scientific community.
</h5>

<hr>

<p>
<h3><strong><u>Solution:</u></strong></h3>
<h5>
Table1.cc is a simple web application which aims to provide an intuitive easy-to-use interface to enable automated generation of a <em>Table 1</em>. The purpose is to make the power of R and Python more accessible for this use case.
</h5>
</p>

<hr>

<p>
  <h5><em>Try it out below!</em> OR click <a href="/tutorial">I'd still like to see a tutorial...</a></h5>
</p>


<div id="wrap">
  <div class="item1">

  {% if complete_form.paste_data %}
  <form method="post">
          {{ complete_form.paste_data.hidden_tag()}}
          {{ complete_form.paste_data.excel_data(cols="99", rows="10") }}
          <br>
          {% for error in complete_form.paste_data.excel_data.errors %}
            <span style="color: red;">[{{ error }}]</span>
          {% endfor %}
          {{ complete_form.paste_data.submit1() }}
  {% endif %}

{% if complete_form.options %}
    {{complete_form.options.hidden_tag()}}
    {% if complete_form.options.grouping_variable.choices != [] %}
    <h5><b>Step 1:</b> Select Grouping Variable:</h5>
    {{ complete_form.options.grouping_variable() }}
    <br>
    <h5><b>Step 2:</b> Select Variables of Interest and select the Variable Type:</h5>
    <table>
    {% for subfield in complete_form.options.included_variables %}
      <tr>
          <td>{{ subfield(checked=True) }}</td>
          <td>{{ subfield.label }}</td>
          <td>{{ complete_form.options.variable_type() }}<td>
      </tr>
    {% endfor %}
  </table>
        <h5><b>Step 3:</b> Additional options:</h5>
        {{ complete_form.options.pval(checked=False)}}
        {{ complete_form.options.pval.label }}
        {% endif %}
        <hr>
      {{ complete_form.options.submit2() }}
  </form>
  {% endif %}


</div>
  <div class="item2">
  </div>

  <div class="item3">
    {% if my_table_html %}

    {{ my_table_html | safe }}

    {% endif %}

</div>

  {% endblock content %}

{% block scripts %}
{{ super() }}
<script>

// function generateTable() {
//     var data = $('#pastein').val();
// var rows = data.split("\n");
//
// var table = $('<table />');
//
// for(var y in rows) {
//     var cells = rows[y].split("\t");
//     var row = $('<tr />');
//     for(var x in cells) {
//         row.append('<td>'+cells[x]+'</td>');
//     }
//     table.append('<input type="hidden" name="value">');
//     table.append(row);
//     table.append('</input>');
// }

// Insert into DOM
// $('#excel_table').html(table);
// }

// $(document).ready(function() {
// 	$('#pastein').on('paste', function(event) {
//       $('#pastein').on('input', function() {
//         generateTable();
//         $('#pastein').off('input');
//       })
//   })
// })


// $(document).ready( function () {
//     $('#parsed_table').DataTable();
// } );


</script>

{% endblock scripts %}
